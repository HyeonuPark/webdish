"use strict";!function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,i=/BlackBerry/i,j=/BB10/i,k=/Opera Mini/i,l=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),n=function(a,b){return a.test(b)},o=function(a){var o=a||navigator.userAgent;return this.apple={phone:n(b,o),ipod:n(c,o),tablet:n(d,o),device:n(b,o)||n(c,o)||n(d,o)},this.android={phone:n(e,o),tablet:!n(e,o)&&n(f,o),device:n(e,o)||n(f,o)},this.windows={phone:n(g,o),tablet:n(h,o),device:n(g,o)||n(h,o)},this.other={blackberry:n(i,o),blackberry10:n(j,o),opera:n(k,o),firefox:n(l,o),device:n(i,o)||n(j,o)||n(k,o)||n(l,o)},this.seven_inch=n(m,o),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},p=function(){var a=new o;return a.Class=o,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=o:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=p():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=p()):a.isMobile=p()}(this);var screen_size=localStorage.screen_size=localStorage.screen_size||(isMobile.phone?"mobile":"large");"/"===location.pathname&&"mobile"===screen_size?location.pathname="/m":"/m"===location.pathname&&"large"===screen_size&&(location.pathname="/"),function(a){a.wikimark=function b(a){var c=[],d=[],e=[];console.log("start parsing wikimark"),a=a.replace(/</g,"&lt").replace(/>/g,"&gt"),console.log("replaced all html tags");for(var f=/@@@([\S\s]*?)@@@/,g=f.exec(a);null!==g;g=f.exec(a)){var h=g[1];a=a.replace(f,"@<<<<"+c.length+">>>>@"),c.push(h)}console.log("saved code block");for(var i=/^(#+)(.*?)$/m,j=[],g=i.exec(a);null!==g;g=i.exec(a)){var k=g[1].length,h=g[2];j=j.slice(0,k),j[k-1]=j[k-1]?j[k-1]+1:1,d.push("<b>"+j.join(".")+"</b> "+h),a=a.replace(i,'<hr><h3 id="wikimark-title-'+j.join("-")+'"><strong>'+j.join(".")+" "+h+"</strong></h3>")}console.log("parsed titles");for(var l=/\(\((.*?)\)\)/m,g=l.exec(a);null!=g;g=l.exec(a)){var h=g[1];e.push(h),a=a.replace(l,'<a class="badge footnote-marker">'+e.length+"</a>")}console.log("parsed footnotes");for(var m=/\{\{(.*?)\}\}/m,g=m.exec(a);null!==g;g=m.exec(a)){var h=g[1];a=h.includes(".")?a.replace(m,'<a href="'+h+'">'+h+"</a>"):a.replace(m,'<a href="#/wiki/'+h+'">'+h+"</a>")}console.log("parsed links");for(var n=/\[\[(.*?)\]\]/m,g=n.exec(a);null!==g;g=n.exec(a)){var h=g[1];a=h.includes(".")?a.replace(m,'<img src="'+h+'">'):a.replace(m,'<img src="'+(b.img||"https://example.com/")+h+'">')}console.log("parsed images");for(var o=/@<<<<(\d+)>>>>@/,g=o.exec(a);null!==g;g=o.exec(a)){var h=Number(g[1]);a=a.replace(o,'<code class="code-highlight">'+c[h]+"</code>")}console.log("reloaded code blocks");var p='<div><ol class="no-order">';for(var g in d)p+="<li>"+d[g]+"</li>";p+="</ol><pre>"+a+'</pre><ol class="no-order">';for(var g in e)p+='<li><a class="badge footnote">'+(Number(g)+1)+"</a>"+e[g]+"</li>";return p+="</ol></div>"}}(this);