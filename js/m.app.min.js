!function(a){"use strict";a.wikimark=function b(a){var c=[],d=[],e=[];console.log("start parsing wikimark"),a=a.replace(/</g,"&lt").replace(/>/g,"&gt"),console.log("replaced all html tags");for(var f=/@@@([\S\s]*?)@@@/,g=f.exec(a);null!==g;g=f.exec(a)){var h=g[1];a=a.replace(f,"@<<<<"+c.length+">>>>@"),c.push(h)}console.log("saved code block");for(var i=/^(#+)(.*?)$/m,j=[],g=i.exec(a);null!==g;g=i.exec(a)){var k=g[1].length,h=g[2];j=j.slice(0,k),j[k-1]=j[k-1]?j[k-1]+1:1,d.push("<b>"+j.join(".")+"</b> "+h),a=a.replace(i,'<hr><h3 id="wikimark-title-'+j.join("-")+'"><strong>'+j.join(".")+" "+h+"</strong></h3>")}console.log("parsed titles");for(var l=/\(\((.*?)\)\)/m,g=l.exec(a);null!=g;g=l.exec(a)){var h=g[1];e.push(h),a=a.replace(l,'<a class="badge footnote-marker">'+e.length+"</a>")}console.log("parsed footnotes");for(var m=/\{\{(.*?)\}\}/m,g=m.exec(a);null!==g;g=m.exec(a)){var h=g[1];a=h.includes(".")?a.replace(m,'<a href="'+h+'">'+h+"</a>"):a.replace(m,'<a href="#/wiki/'+h+'">'+h+"</a>")}console.log("parsed links");for(var n=/\[\[(.*?)\]\]/m,g=n.exec(a);null!==g;g=n.exec(a)){var h=g[1];a=h.includes(".")?a.replace(m,'<img src="'+h+'">'):a.replace(m,'<img src="'+(b.img||"https://example.com/")+h+'">')}console.log("parsed images");for(var o=/@<<<<(\d+)>>>>@/,g=o.exec(a);null!==g;g=o.exec(a)){var h=Number(g[1]);a=a.replace(o,'<code class="code-highlight">'+c[h]+"</code>")}console.log("reloaded code blocks");var p='<div><ol class="no-order">';for(var g in d)p+="<li>"+d[g]+"</li>";p+="</ol><pre>"+a+'</pre><ol class="no-order">';for(var g in e)p+='<li><a class="badge footnote">'+(Number(g)+1)+"</a>"+e[g]+"</li>";return p+="</ol></div>"}}(this);